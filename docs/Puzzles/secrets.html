<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Secrets Well Kept</title>
  <script>
    // SHA-256 hash values of the allowed words
    const allowedHashes = new Set([
      "37f07edff1cb1aeb152ee1c945763b7b1cfa8cf7cf79b37a5d13f7eae2ec87cd",
      "a473b464cd007432b1cda70e17c59c3570e4d2ec1fca2b04b6018b617b125b22",
      "27a37862f4074a0e9a0c44302436d450fe9812e841b11e314dfe2a51ad50c82b",
      "dbe6c64e8a6d3213b1e196e172947460f7d74fd60e447e907768b13c860655d3",
      "71f8eaf3c95cb6fd68924c7eb7fd802518f08b3bbf6596aeb6d7b5d0fffc58c9",
      "a6be5e09f2b8c2a8b5a764a7ecfb9bb57b8a891db4fc216c7f747f3075a9a109",
      "dd9a3a693da7a5bc04f5f92e01d3d3ac4aaff3dc2689c5d8695b5f8a10447362",
      "7f71bd4609c49462b4d5e5bc40e6a10faadf76ed0cb72d3a54e7a083aa5ec7e6",
      "b846a1eb51f6c13d289c94a1d3a78a4444b9e14ec0d66aab8ecf5c2d0b8a6719" 
    ]);

    async function hashWord(word) {
      const encoder = new TextEncoder();
      const data = encoder.encode(word.trim().toLowerCase());
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function validateInputs() {
      const inputs = [
        document.getElementById('input1').value,
        document.getElementById('input2').value,
        document.getElementById('input3').value
      ];

      const hashedInputs = await Promise.all(inputs.map(hashWord));
      const uniqueValidHashes = new Set(hashedInputs.filter(h => allowedHashes.has(h)));

      document.getElementById('submitBtn').disabled = (uniqueValidHashes.size !== 3);
    }

    window.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', validateInputs);
      });
    });
  </script>
</head>
<body>
  <h2>What Secrets do You Know?</h2>
  <form action="/worksheet">
    <input type="text" id="input1" placeholder="Word 1"><br><br>
    <input type="text" id="input2" placeholder="Word 2"><br><br>
    <input type="text" id="input3" placeholder="Word 3"><br><br>
    <button type="submit" id="submitBtn" disabled>Submit</button>
  </form>
</body>
</html>
